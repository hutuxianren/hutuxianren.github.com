---
layout: post
title: "高级路由和DV"
comments: true
share: true
tags: 计算机高级网络学习
---

##路由器的基本功能
###收到数据报后路由器的工作步骤
- 打开数据报，读取头部信息
- 确定目标网络地址
- 查找路由表，重新打包后转发到相应的接口

###上面的步骤完成了路由器的基本功能
- 路由选择
- 转发（交换）

##路由和转发
- (Forwarding)转发:将分组从入口移到出口的过程，依据
 - 转发表（路由表）
 - 分组中携带的信息

- （Routing)路由:转发表建立和维护的过程，决定下一跳如何转发
 - 1个或更多的路由选择协议
 - 将路由信息注入到转发表中
 - 静态路由：由网络管理员手工输入。
 - 动态路由：通过路由选择协议自动适应网络拓扑或流量的变化。


##分组转发技术
- __源路由技术__:源路由的用户可以指定他所发送的数据包沿途经过的部分或者全部路由器。它区别于有主机或者路由器的互联层软件自行选择路由后得出的路径。
 - 分组中列出整个路径:确定分发的方向
 - 路由器处理的步骤
     - 检查路径上的第一步
     - 从分组中剥离路径上的第一步
     - 将分组转发到剥离的那一步上
- __源路由小结__
  - 优点
      - 可以很简单和快速地完成转发
  - 缺点
      - 报头可变
      - 源必须知道和发现拓扑
  - 典型应用
      - Ad-hoc networks（自组织网络）：临时应变的特定网络

- __虚电路技术__
- __ip，数据包交换__

##管理距离(administrative distance)
管理距离是指一种路由协议的路由可信度。每一种路由协议按可靠性从高到低，依次分配一个信任等级，这个信任等级就叫管理距离。

对于两种不同的路由协议到一个目的地的路由信息，路由器首先根据管理距离决定相信哪一个协议。

AD值越低，则它的优先级越高。 一个管理距离是一个从0——255的整数值，0是最可信赖的，而255则意味着不会有业务量通过这个路由.

出于备份目的的静态路由，只有当其它动态路由失效时才起作用，可以配置它的管理距离，让他高过动态协议相应的管理距离。

###重要的管理距离
- 直连接口 0
- 静态路由 1
- OSPF 110
- RIP(v1&v2) 120

##静态路由与动态路由
###什么时候用静态路由以及它的好处
- 拓扑长期不变，无须学习，可以节约路由器的学习维护开销
- 存根网络（stub，是一种通过单一路由访问的网络），可配置默认路由
   - 减小学习维护开销
   - 缩减路由表的规模
- 避免错误地丢弃分组

###动态路由的来源——路由选择协议
__自治系统(AS)__:运行在其中的是内部网关协议，运行在AS之间的事外部网关协议。

- 内部网关协议(IGP)
   - 路由信息协议（RIP）（典型DV协议,距离矢量路由协议）
      - 应用DV算法，缺点是收敛速度慢，存在无穷计数问题
      - Rip特点
          - RIP是一种距离矢量路由协议。
          - RIP使用跳数作为路由选择的度量。
          - 当到达目的网络的跳数超过15跳，数据包将被丢掉。
          - 缺省地，RIP路由更新广播周期为30秒
      - 解决慢收敛的方法
          - 水平分割（Split Horizon）
          - 毒性逆转（Poison Reverse）
          - 抑制定时器（Hold-Down Timers）
          - 触发更新（Triggered Updates）

   - 开放最短路径优先（OSPF）（典型的LS协议,链路状态路由协议，Dijkstra或spf算法）
   - 内部网关路由协议（IGRP） (DV协议)
   - 增强内部网关路由协议（EIGRP）(DV协议)
- 外部网关协议(EGP)
   - 唯一可用的EGP:边界网关协议（BGP）
      - 特点
          - 在数据结构区域中，EIGRP将创建和维护*拓扑表*和*邻居表*
          - 在路由协议消息区域，EIGRP将使用*应答*
          - EIGRP使用*DUAL*算法实现最佳路由

